---
title: "TakeHome_Ex1"
author: "Lu Quanfang"
date: "30 January 2023"
date_modified: "r Sys.Date()"
---

# Analysis on the geographic distribution of functional and non-function water points in Osub State, Nigeria

## 1.Background

Water is an important resource to mankind. Clean and accessible water is critical to human health. It provides a healthy environment, a sustainable economy, reduces poverty and ensures peace and security. Yet over 40% of the global population does not have access to sufficient clean water. By 2025, 1.8 billion people will be living in countries or regions with absolute water scarcity, according to UN-Water. The lack of water poses a major threat to several sectors, including food security. Agriculture uses about 70% of the world's accessible freshwater.

Developing countries are most affected by water shortages and poor water quality. Up to 80% of illnesses in the developing world are linked to inadequate water and sanitation. Despite technological advancement, providing clean water to the rural community is still a major development issues in many countries globally, especially countries in the Africa continent.

## 2.Objectives

Apply appropriate spatial point patterns analysis method to discover the geographical distribution of functional and non-function water points an and their co-locations

## 3.The Steps at a glance

To achieve the purpose of discovering the geographic distribution of functional and non-functional water points and their co-locations, here is the graph of my working flow so that you can get a quick, overall understanding about the entire process by visualizing it.

### 3.1 Exploratory Spatial Data Analysis (ESDA)

##### 3.1.1 Load necessary R-package and import the geospatial dataset

The package we used for analysis are:

-   **sf**: For importing, managing and processing vector-based geospatial data

-   **tidyverse**: For performing data science tasks such as importing, wrangling and visualising data.

-   **tmap**: used for creating thematic maps, such as choropleth and bubble maps

-   **raster:** reads, writes, manipulates, analyses and models gridded spatial data

-   **spatstat**: used for point pattern analysis

-   **maptools**: a set of tools for manipulating geographic data

-   **funModeling**: used for exploratory data analysis

Let's load the package required!

```{r}
pacman::p_load(maptools, sf, tidyverse,raster, spatstat, tmap,funModeling)
```

Here are two possible datasets that we can obtain the geospatial information of Nigeria from, one is from [Humanitarian Data Exchange](https://data.humdata.org/) portal, the other is from [geoBoundaries](https://www.geoboundaries.org/), let's read both of the datasets and examine which one is more suitable to use, **notice that the crs for Nigeria should be 23692, so we need to assign the crs after reading the data**:

```{r}
geoNGA <- st_read("data/geospatial/",
                  layer = "geoBoundaries-NGA-ADM2") %>%
  st_transform(crs = 26392)
```

```{r}
NGA <- st_read("data/geospatial/",
               layer = "nga_admbnda_adm2_osgof_20190417") %>%
  st_transform(crs = 26392)
```

After checking both sf dataframes, we notice that NGA provide both LGA and state information. Hence, NGA data.frame will be selected for the subsequent processing.

##### 3.1.2 Importing Aspatial data

As our target is to analysis the water points in Osun State,Nigeria,(the area colored in red) so let's filter the data and selected only the observations in Osun State, Nigeria![](graph%20used/location%20of%20Osun%20State.jpg){width="380"}

(Fig1: [Location of Osun State](https://en.wikipedia.org/wiki/Osun_State))

```{r}
wp_Osun <- read_csv("data/aspatial/WPdx.csv") %>%
  filter(`#clean_country_name` == "Nigeria") %>%
  filter (`#clean_adm1` == "Osun") 
```

##### 3.1.3 Mappng the geospatial data sets

```{r}
#Let's display the studyarea - Osun on the map:
NGA_Osun <- NGA%>%
  filter(`ADM1_EN` == "Osun")
```

```{r}
tmap_mode('plot')
tm_shape(NGA_Osun)+tm_polygons()

```

Compared to the map (Fig.1) we know that we have successfully obtained the geospatial information of Osun

##### 3.1.4 **Converting water point data into sf point features**

In order to convert the point data into sf point feature for further analysis, first we need to convert the wkt field into sfc field by using st_as_sfc() data type.

```{r}
wp_Osun$Geometry = st_as_sfc(wp_Osun$`New Georeferenced Column`)
wp_Osun
```

Then, use st_sf() to convert the tibble data.frame into sf object and also include the referencing system of the data into the sf object.

```{r}
wp_Osun <- st_sf(wp_Osun, crs=4326)
wp_Osun
```

After assigning a crs to our sf object of wp_Osun, let's transforming it into Nigeria projected coordinate system

```{r}
wp_Osun <- wp_Osun %>%
  st_transform(crs = 26392)
```

#### 3.1.2 **Geospatial Data Cleaning**

##### 3.1.2.1 Keep necessary fields only

##### 3.1.2.2 Checking for duplicate name

**3.1.2.3 Data Wrangling for Water Point Data**

```{r}
freq(data = wp_Osun,
     input = '#status_clean')
#change
```

#### 3.1.2Display the kernel density maps on openstreetmap of Osub State, Nigeria.

#### 3.1.3 Describe the spatial patterns revealed by the kernel density maps. Highlight the advantage of kernel density map over point map.

### 3.2 Second-order Spatial Point Patterns Analysis

#### 3.2.1 Formulate the null hypothesis and alternative hypothesis and select the confidence level.

#### 3.2.2 Perform the test by using appropriate Second order spatial point patterns analysis technique.

#### 3.2.3 With reference to the analysis results, draw statistical conclusions.

### 3.3 Spatial Correlation Analysis

#### 3.3.1 Formulate the null hypothesis and alternative hypothesis and select the confidence level.

#### 3.3.2 Perform the test by using appropriate Second order spatial point patterns analysis technique.

#### 3.3.3 With reference to the analysis results, draw statistical conclusions.
